---
import siteConfig from '../../data/siteConfig.json';

const getIcon = (iconType: string) => {
  switch (iconType) {
    case 'checkmark':
      return `<path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>`;
    case 'clock':
      return `<path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>`;
    case 'user':
      return `<path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>`;
    case 'pound':
      return `<g><circle cx="32" cy="32" r="25.29"/><path d="M41.72,45.18H23.3a.14.14,0,0,1-.11-.23c1.26-1.35,7.28-8.25,5-14.46-2.57-6.92-.91-17.91,11.52-12.8" stroke-linecap="round"/><line x1="20.39" y1="30.67" x2="37.58" y2="30.67" stroke-linecap="round"/></g>`;
    default:
      return '';
  }
};

const getIconLabel = (iconType: string): string => {
  switch (iconType) {
    case 'checkmark':
      return 'Success checkmark icon';
    case 'clock':
      return 'Clock scheduling icon';
    case 'user':
      return 'Person instruction icon';
    case 'pound':
      return 'Pound sterling pricing icon';
    default:
      return 'Feature icon';
  }
};

const { title, subtitle, columns } = siteConfig.sections.whyChooseMe;
const sectionName = 'whyChooseMe';

const sectionClass = `section-${sectionName}`;
const itemClass = `${sectionName}-item`;
const iconClass = `${sectionName}-icon`;
const titleClass = `${sectionName}-title`;
const contentClass = `${sectionName}-content`;
---

<section
  id="why-choose-me"
  class={`${sectionClass} bg-stone-50 dark:bg-slate-900 py-20 md:py-20`}
  aria-labelledby="why-choose-heading"
>
  <div class="max-w-7xl mx-auto px-6 md:px-12">
    <div class="text-center mb-12">
      <h2
        id="why-choose-heading"
        class="text-3xl md:text-4xl font-bold text-stone-800 dark:text-stone-50 mb-4 font-heading"
      >
        {title}
      </h2>
    </div>
    <div class="text-center mb-12 md:mb-16">
      <p class="text-2xl md:text-3xl text-stone-600 dark:text-stone-300 max-w-3xl mx-auto">
        {subtitle.toUpperCase()}
      </p>
    </div>

    <div
      class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-2"
      role="list"
      aria-label="Key benefits and unique selling points"
    >
      {
        columns.items.map((item, index) => (
          <article
            class={`${itemClass} group text-center bg-white/10 hover:bg-stone-50 backdrop-blur-sm border border-white/20 hover:border-stone-200 px-8 py-10 md:p-6 transition-all duration-300`}
            role="listitem"
            aria-labelledby={`usp-${index + 1}-title`}
          >
            <div
              class={`${iconClass} w-16 h-16 bg-amber-700 group-hover:bg-amber-600 rounded-full flex items-center justify-center mx-auto mb-4 transition-colors duration-300`}
              role="img"
              aria-label={getIconLabel(item.icon)}
            >
              <svg
                class={item.icon === 'pound' ? 'w-10 h-10 text-white' : 'w-8 h-8 text-white'}
                fill="none"
                stroke="currentColor"
                stroke-width={item.icon === 'pound' ? '2' : '1'}
                viewBox={item.icon === 'pound' ? '0 0 64 64' : '0 0 24 24'}
                aria-hidden="true"
                set:html={getIcon(item.icon)}
              />
            </div>
            <h3
              id={`usp-${index + 1}-title`}
              class={`${titleClass} text-xl font-semibold text-black dark:text-stone-50 group-hover:text-black mb-4 font-heading transition-colors duration-300`}
            >
              {item.title}
            </h3>
            <p
              class={`${contentClass} text-gray-700 dark:text-stone-300 group-hover:text-black transition-colors duration-300`}
            >
              {item.content}
            </p>
          </article>
        ))
      }
    </div>
  </div>
</section>
